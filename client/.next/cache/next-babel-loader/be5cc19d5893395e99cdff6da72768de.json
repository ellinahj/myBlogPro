{"ast":null,"code":"var _jsxFileName = \"/Users/hj/develop/myproject/myDiary/client/src/containers/blog/ListContainer.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useState, useEffect, useCallback } from 'react';\nimport styled from 'styled-components';\nimport MyList from '../../components/blog/List';\nimport Menu from '../../components/blog/Menu';\nimport { colorLuminance } from '../../utils/common';\nimport { setCate } from '../../actions/base';\nimport { getCate, getBlog, getSearchedBlog } from '../../api/blog';\nimport Search from '../../components/blog/Search';\nimport store from '../../store';\nexport default function ListContainer() {\n  const dispatch = useDispatch();\n  const userColor = useSelector(state => state.common.userColor);\n  const luminantColor = userColor && colorLuminance(userColor, 0.7);\n  const userInfo = useSelector(state => state.common.userInfo);\n  const category = useSelector(state => state.common.category);\n  const {\n    0: menuIndex,\n    1: setMenuIndex\n  } = useState(0);\n  const {\n    0: isSticky,\n    1: setSticky\n  } = useState(false);\n  const {\n    0: loadMore,\n    1: setLoadMore\n  } = useState(true);\n  const {\n    0: selectedCateId,\n    1: setSelectedCateId\n  } = useState();\n  const {\n    0: blogData,\n    1: setBlogData\n  } = useState(undefined);\n  const {\n    0: sendToListValue,\n    1: setSendToListValue\n  } = useState('');\n\n  const handleScroll = () => {\n    if (window.pageYOffset >= 150) {\n      setSticky(true);\n    } else {\n      setSticky(false);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, []);\n  useEffect(() => {\n    const getToken = localStorage.getItem('mydiary_token');\n\n    if (getToken) {\n      const config = {\n        access_token: getToken\n      };\n      getCate(config).then(res => {\n        if (res.status === 200 && res.data) {\n          console.log(res.data.data);\n\n          if (category && category.length > 0) {\n            setSelectedCateId(category[0].id);\n          }\n\n          store.dispatch(setCate(res.data.data));\n        }\n      });\n    }\n  }, []);\n\n  const handleMenuClick = (index, cateId) => {\n    // 메뉴 컴포넌트 변경 클릭\n    setMenuIndex(index);\n    setSelectedCateId(cateId);\n  };\n\n  useEffect(() => {\n    const storedToken = localStorage.getItem('mydiary_token') && localStorage.getItem('mydiary_token');\n    const config = {\n      access_token: storedToken\n    };\n\n    if (category && category.length > 0) {\n      const cateId = category[0].id;\n      getBlog(config, cateId).then(res => {\n        if (res.status < 300) {\n          setBlogData(res.data.data);\n        }\n      });\n    }\n  }, [category]);\n  useEffect(() => {\n    const storedToken = localStorage.getItem('mydiary_token') && localStorage.getItem('mydiary_token');\n    const config = {\n      access_token: storedToken\n    };\n    const cateId = selectedCateId;\n    getBlog(config, cateId).then(res => {\n      if (res.status < 300) {\n        setBlogData(res.data.data);\n      }\n    });\n  }, [menuIndex]);\n\n  const getSearch = value => {\n    if (blogData && blogData.length !== 0 && value !== '') {\n      const storedToken = localStorage.getItem('mydiary_token') && localStorage.getItem('mydiary_token');\n      const config = {\n        access_token: storedToken\n      };\n\n      if (category && category.length > 0) {\n        const cateId = category[0].id;\n        getSearchedBlog(config, cateId, value).then(res => {\n          if (res.status < 300) {\n            setBlogData(res.data.data);\n            setSendToListValue(value);\n          }\n        });\n      }\n    }\n  };\n\n  return __jsx(ListCon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, __jsx(Menu, {\n    handleMenuClick: handleMenuClick,\n    luminantColor: luminantColor,\n    isSticky: isSticky,\n    menuIndex: menuIndex,\n    userColor: userColor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }), blogData && blogData.length !== 0 && __jsx(Search, {\n    getSearch: getSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 45\n    }\n  }), __jsx(MyList, {\n    blogData: blogData // scrollable={true}\n    ,\n    luminantColor: luminantColor // isSticky={isSticky}\n    // menuIndex={menuIndex}\n    ,\n    userInfo: userInfo,\n    userColor: userColor,\n    sendToListValue: sendToListValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }));\n}\nconst ListCon = styled.div.withConfig({\n  displayName: \"ListContainer__ListCon\",\n  componentId: \"sc-3stqnk-0\"\n})([\"width:100%;height:100%;position:relative;\"]);","map":{"version":3,"sources":["/Users/hj/develop/myproject/myDiary/client/src/containers/blog/ListContainer.js"],"names":["useSelector","useDispatch","useState","useEffect","useCallback","styled","MyList","Menu","colorLuminance","setCate","getCate","getBlog","getSearchedBlog","Search","store","ListContainer","dispatch","userColor","state","common","luminantColor","userInfo","category","menuIndex","setMenuIndex","isSticky","setSticky","loadMore","setLoadMore","selectedCateId","setSelectedCateId","blogData","setBlogData","undefined","sendToListValue","setSendToListValue","handleScroll","window","pageYOffset","addEventListener","removeEventListener","getToken","localStorage","getItem","config","access_token","then","res","status","data","console","log","length","id","handleMenuClick","index","cateId","storedToken","getSearch","value","ListCon","div"],"mappings":"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","sourcesContent":["import { useSelector, useDispatch } from 'react-redux';\nimport { useState, useEffect, useCallback } from 'react';\nimport styled from 'styled-components';\nimport MyList from '../../components/blog/List';\nimport Menu from '../../components/blog/Menu';\nimport { colorLuminance } from '../../utils/common';\nimport { setCate } from '../../actions/base';\nimport { getCate, getBlog, getSearchedBlog } from '../../api/blog';\nimport Search from '../../components/blog/Search';\nimport store from '../../store';\nexport default function ListContainer() {\n  const dispatch = useDispatch();\n  const userColor = useSelector(state => state.common.userColor);\n  const luminantColor = userColor && colorLuminance(userColor, 0.7);\n  const userInfo = useSelector(state => state.common.userInfo);\n  const category = useSelector(state => state.common.category);\n  const [menuIndex, setMenuIndex] = useState(0);\n  const [isSticky, setSticky] = useState(false);\n  const [loadMore, setLoadMore] = useState(true);\n  const [selectedCateId, setSelectedCateId] = useState();\n  const [blogData, setBlogData] = useState(undefined);\n  const [sendToListValue, setSendToListValue] = useState('');\n\n  const handleScroll = () => {\n    if (window.pageYOffset >= 150) {\n      setSticky(true);\n    } else {\n      setSticky(false);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, []);\n\n  useEffect(() => {\n    const getToken = localStorage.getItem('mydiary_token');\n    if (getToken) {\n      const config = {\n        access_token: getToken\n      };\n      getCate(config).then(res => {\n        if (res.status === 200 && res.data) {\n          console.log(res.data.data);\n          if (category && category.length > 0) {\n            setSelectedCateId(category[0].id);\n          }\n          store.dispatch(setCate(res.data.data));\n        }\n      });\n    }\n  }, []);\n\n  const handleMenuClick = (index, cateId) => {\n    // 메뉴 컴포넌트 변경 클릭\n    setMenuIndex(index);\n    setSelectedCateId(cateId);\n  };\n  useEffect(() => {\n    const storedToken = localStorage.getItem('mydiary_token') && localStorage.getItem('mydiary_token');\n    const config = {\n      access_token: storedToken\n    };\n    if (category && category.length > 0) {\n      const cateId = category[0].id;\n      getBlog(config, cateId).then(res => {\n        if (res.status < 300) {\n          setBlogData(res.data.data);\n        }\n      });\n    }\n  }, [category]);\n\n  useEffect(() => {\n    const storedToken = localStorage.getItem('mydiary_token') && localStorage.getItem('mydiary_token');\n    const config = {\n      access_token: storedToken\n    };\n    const cateId = selectedCateId;\n    getBlog(config, cateId).then(res => {\n      if (res.status < 300) {\n        setBlogData(res.data.data);\n      }\n    });\n  }, [menuIndex]);\n\n  const getSearch = value => {\n    if (blogData && blogData.length !== 0 && value !== '') {\n      const storedToken = localStorage.getItem('mydiary_token') && localStorage.getItem('mydiary_token');\n      const config = {\n        access_token: storedToken\n      };\n      if (category && category.length > 0) {\n        const cateId = category[0].id;\n        getSearchedBlog(config, cateId, value).then(res => {\n          if (res.status < 300) {\n            setBlogData(res.data.data);\n            setSendToListValue(value);\n          }\n        });\n      }\n    }\n  };\n  return (\n    <ListCon>\n      <Menu\n        handleMenuClick={handleMenuClick}\n        luminantColor={luminantColor}\n        isSticky={isSticky}\n        menuIndex={menuIndex}\n        userColor={userColor}\n      />\n      {blogData && blogData.length !== 0 && <Search getSearch={getSearch} />}\n      <MyList\n        blogData={blogData}\n        // scrollable={true}\n        luminantColor={luminantColor}\n        // isSticky={isSticky}\n        // menuIndex={menuIndex}\n        userInfo={userInfo}\n        userColor={userColor}\n        sendToListValue={sendToListValue}\n      />\n    </ListCon>\n  );\n}\nconst ListCon = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n`;\n"]},"metadata":{},"sourceType":"module"}