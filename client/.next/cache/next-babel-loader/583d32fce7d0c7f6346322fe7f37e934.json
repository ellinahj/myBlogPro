{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/hj/develop/myproject/myDiary/client/src/containers/mypage/EditPw.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport styled, { css } from 'styled-components';\nimport Container from '../../components/common/Container';\nimport { useState, useEffect } from 'react';\nimport { updatePwd, checkPwd } from '../../api/user';\nimport { theme, BlueEditBtn, BasicTitle, BasicButton } from '../../utils/theme';\nexport default function ChangePwd(props) {\n  var clickEditPw = props.clickEditPw,\n      showEditPw = props.showEditPw;\n\n  var _useState = useState({\n    prevPwd: '',\n    newPwd: '',\n    newPwdCheck: ''\n  }),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  var _useState2 = useState(0),\n      prevPwdTimeout = _useState2[0],\n      setPrevPwdTimeout = _useState2[1];\n\n  var _useState3 = useState(0),\n      newPwdTimeout = _useState3[0],\n      setNewPwdTimeout = _useState3[1];\n\n  var _useState4 = useState(false),\n      allOk = _useState4[0],\n      setAllOk = _useState4[1];\n\n  var _useState5 = useState(''),\n      newPwdState = _useState5[0],\n      setNewPwdState = _useState5[1];\n\n  var _useState6 = useState(''),\n      prevPwdState = _useState6[0],\n      setPrevPwdState = _useState6[1];\n\n  var _useState7 = useState(''),\n      newPwdCheckState = _useState7[0],\n      setNewPwdCheckState = _useState7[1];\n\n  var _useState8 = useState(false),\n      prevPwdTyping = _useState8[0],\n      setPrevPwdTyping = _useState8[1];\n\n  var regex = /^.*(?=^.{6,15}$)(?=.*\\d)(?=.*[a-zA-Z])(?=.*[!@#$%^&+=]).*$/;\n\n  var handlePrevPwd = function handlePrevPwd(e) {\n    var nextValue = _defineProperty({}, e.target.name, e.target.value);\n\n    setValue(_objectSpread({}, value, {}, nextValue));\n    prevPwdTimeout && clearTimeout(prevPwdTimeout);\n    var timer = setTimeout(function () {\n      console.log('e');\n      var getToken = localStorage.getItem('mydiary_token');\n\n      if (getToken) {\n        var config = {\n          access_token: getToken\n        };\n        var data = {\n          pwd: nextValue.prevPwd\n        };\n        checkPwd(config, data).then(function (res) {\n          console.log(res, 'res');\n\n          if (res.status === 200) {\n            console.log('in');\n            setPrevPwdTyping(true);\n            setPrevPwdState(true);\n          }\n        })[\"catch\"](function (err) {\n          if (err.response.status === 401) {\n            setPrevPwdTyping(true);\n            setPrevPwdState(false);\n          }\n        });\n      }\n    }, 2500);\n    setPrevPwdTimeout(timer);\n  };\n\n  var handleNewPwd = function handleNewPwd(e) {\n    setValue(_objectSpread({}, value, {\n      newPwd: e.target.value\n    }));\n\n    if (!regex.test(e.target.value)) {\n      console.log('false');\n      setNewPwdState(false);\n    } else {\n      console.log('true');\n      setNewPwdState(true);\n    }\n  };\n\n  var handleNewPwdCheck = function handleNewPwdCheck(e) {\n    setValue(_objectSpread({}, value, {\n      newPwdCheck: e.target.value\n    }));\n\n    if (newPwdState && value.newPwd === e.target.value) {\n      setNewPwdCheckState(true);\n    } else {\n      setNewPwdCheckState(false);\n    }\n  };\n\n  useEffect(function () {\n    if (prevPwdState && newPwdCheckState) {\n      setAllOk(true);\n    }\n  }, [newPwdCheckState]);\n\n  var handleSubmit = function handleSubmit() {\n    //최종 변경\n    var getToken = localStorage.getItem('mydiary_token');\n\n    if (getToken) {\n      var config = {\n        access_token: getToken\n      };\n      var data = value;\n      console.log(value, 'last value');\n      updatePwd(config, data).then(function (res) {\n        if (res.status === 200 && res.data) {\n          alert('비밀번호 변경이 완료되었습니다.');\n        }\n      });\n    }\n  };\n\n  return __jsx(Con, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, __jsx(Column, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, __jsx(TopCon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, __jsx(MainTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, \"\\uBE44\\uBC00\\uBC88\\uD638\"), __jsx(PwEdit, {\n    onClick: function onClick(e) {\n      return clickEditPw(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  }, \"\\uBE44\\uBC00\\uBC88\\uD638\\uBCC0\\uACBD\")), showEditPw && __jsx(React.Fragment, null, __jsx(MarginTopRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, __jsx(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }, \"\\uC774\\uC804\\uBE44\\uBC00\\uBC88\\uD638\"), __jsx(Input, {\n    type: \"password\",\n    name: \"prevPwd\",\n    value: value.prevPwd,\n    onChange: function onChange(e) {\n      return handlePrevPwd(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  })), prevPwdTyping && (prevPwdState ? __jsx(Match, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 51\n    }\n  }, \"\\uC77C\\uCE58\") : __jsx(Mismatch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 71\n    }\n  }, \"\\uC77C\\uCE58\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\")), __jsx(MarginRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, __jsx(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 19\n    }\n  }, \"\\uC0C8\\uBE44\\uBC00\\uBC88\\uD638\"), __jsx(Input, {\n    type: \"password\",\n    name: \"newPwd\",\n    value: value.newPwd,\n    onChange: function onChange(e) {\n      return handleNewPwd(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 19\n    }\n  })), !newPwdState ? __jsx(Mismatch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 33\n    }\n  }, \"\\uC601\\uBB38,\\uC22B\\uC790,\\uD2B9\\uC218\\uBB38\\uC790\\uD3EC\\uD568 6~15\\uC790\\uB9AC\\uB85C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\") : '', __jsx(MarginRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, __jsx(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 19\n    }\n  }, \"\\uC0C8\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\"), __jsx(Input, {\n    type: \"password\",\n    name: \"newPwdCheck\",\n    value: value.newPwdCheck,\n    onChange: function onChange(e) {\n      return handleNewPwdCheck(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }\n  })), newPwdState && value.newPwdCheck && value.newPwdCheck.length > 0 && (newPwdCheckState ? __jsx(Match, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 39\n    }\n  }, \"\\uC77C\\uCE58\") : __jsx(Mismatch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 59\n    }\n  }, \"\\uC77C\\uCE58\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\")), __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, __jsx(SubmitBtn, {\n    disabled: !newPwdCheckState,\n    allOk: allOk,\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 19\n    }\n  }, \"\\uBCC0\\uACBD\")))))));\n}\nvar Con = styled(Container).withConfig({\n  displayName: \"EditPw__Con\",\n  componentId: \"sc-1b9aah4-0\"\n})([\"display:flex;justify-content:center;\"]);\nvar Column = styled.div.withConfig({\n  displayName: \"EditPw__Column\",\n  componentId: \"sc-1b9aah4-1\"\n})([\"display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;\"]);\nvar Row = styled.div.withConfig({\n  displayName: \"EditPw__Row\",\n  componentId: \"sc-1b9aah4-2\"\n})([\"display:flex;width:100%;\"]);\nvar MarginRow = styled(Row).withConfig({\n  displayName: \"EditPw__MarginRow\",\n  componentId: \"sc-1b9aah4-3\"\n})([\"margin-top:20px;\"]);\nvar MarginTopRow = styled(Row).withConfig({\n  displayName: \"EditPw__MarginTopRow\",\n  componentId: \"sc-1b9aah4-4\"\n})([\"margin-top:40px;\"]);\nvar Title = styled.div.withConfig({\n  displayName: \"EditPw__Title\",\n  componentId: \"sc-1b9aah4-5\"\n})([\"\", \";width:120px;\"], BasicTitle);\nvar MainTitle = styled(Title).withConfig({\n  displayName: \"EditPw__MainTitle\",\n  componentId: \"sc-1b9aah4-6\"\n})([\"font-size:\", \";\"], function (props) {\n  return props.theme.mlFont;\n});\nvar TopCon = styled.div.withConfig({\n  displayName: \"EditPw__TopCon\",\n  componentId: \"sc-1b9aah4-7\"\n})([\"width:100%;background:#fafafa;padding:30px;\"]);\nvar SubmitBtn = styled.button.withConfig({\n  displayName: \"EditPw__SubmitBtn\",\n  componentId: \"sc-1b9aah4-8\"\n})([\"color:#aaa;margin:30px auto 0;padding:5px 10px;font-size:\", \";\", \"\"], theme.mFont, function (props) {\n  return props.allOk && css([\"color:#111;cursor:pointer;\"]);\n});\nvar Input = styled.input.withConfig({\n  displayName: \"EditPw__Input\",\n  componentId: \"sc-1b9aah4-9\"\n})([\"width:150px;height:20px;\"]);\nvar PwEdit = styled.div.withConfig({\n  displayName: \"EditPw__PwEdit\",\n  componentId: \"sc-1b9aah4-10\"\n})([\"\", \"\"], BlueEditBtn);\nvar Match = styled.div.withConfig({\n  displayName: \"EditPw__Match\",\n  componentId: \"sc-1b9aah4-11\"\n})([\"color:\", \";margin:10px 0 0 0;font-size:\", \";display:flex;align-items:center;\"], theme.greenFont, theme.sFont);\nvar Mismatch = styled.div.withConfig({\n  displayName: \"EditPw__Mismatch\",\n  componentId: \"sc-1b9aah4-12\"\n})([\"color:\", \";margin:10px 0 0 0;font-size:\", \";display:flex;align-items:center;\"], theme.redFont, theme.sFont);","map":{"version":3,"sources":["/Users/hj/develop/myproject/myDiary/client/src/containers/mypage/EditPw.js"],"names":["styled","css","Container","useState","useEffect","updatePwd","checkPwd","theme","BlueEditBtn","BasicTitle","BasicButton","ChangePwd","props","clickEditPw","showEditPw","prevPwd","newPwd","newPwdCheck","value","setValue","prevPwdTimeout","setPrevPwdTimeout","newPwdTimeout","setNewPwdTimeout","allOk","setAllOk","newPwdState","setNewPwdState","prevPwdState","setPrevPwdState","newPwdCheckState","setNewPwdCheckState","prevPwdTyping","setPrevPwdTyping","regex","handlePrevPwd","e","nextValue","target","name","clearTimeout","timer","setTimeout","console","log","getToken","localStorage","getItem","config","access_token","data","pwd","then","res","status","err","response","handleNewPwd","test","handleNewPwdCheck","handleSubmit","alert","length","Con","Column","div","Row","MarginRow","MarginTopRow","Title","MainTitle","mlFont","TopCon","SubmitBtn","button","mFont","Input","input","PwEdit","Match","greenFont","sFont","Mismatch","redFont"],"mappings":"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","sourcesContent":["import styled, { css } from 'styled-components';\nimport Container from '../../components/common/Container';\nimport { useState, useEffect } from 'react';\nimport { updatePwd, checkPwd } from '../../api/user';\nimport { theme, BlueEditBtn, BasicTitle, BasicButton } from '../../utils/theme';\nexport default function ChangePwd(props) {\n  const { clickEditPw, showEditPw } = props;\n  const [value, setValue] = useState({ prevPwd: '', newPwd: '', newPwdCheck: '' });\n  const [prevPwdTimeout, setPrevPwdTimeout] = useState(0);\n  const [newPwdTimeout, setNewPwdTimeout] = useState(0);\n  const [allOk, setAllOk] = useState(false);\n  const [newPwdState, setNewPwdState] = useState('');\n  const [prevPwdState, setPrevPwdState] = useState('');\n  const [newPwdCheckState, setNewPwdCheckState] = useState('');\n  const [prevPwdTyping, setPrevPwdTyping] = useState(false);\n  const regex = /^.*(?=^.{6,15}$)(?=.*\\d)(?=.*[a-zA-Z])(?=.*[!@#$%^&+=]).*$/;\n\n  const handlePrevPwd = e => {\n    const nextValue = { [e.target.name]: e.target.value };\n    setValue({ ...value, ...nextValue });\n    prevPwdTimeout && clearTimeout(prevPwdTimeout);\n    const timer = setTimeout(() => {\n      console.log('e');\n      const getToken = localStorage.getItem('mydiary_token');\n      if (getToken) {\n        const config = {\n          access_token: getToken\n        };\n        const data = { pwd: nextValue.prevPwd };\n        checkPwd(config, data)\n          .then(res => {\n            console.log(res, 'res');\n            if (res.status === 200) {\n              console.log('in');\n              setPrevPwdTyping(true);\n              setPrevPwdState(true);\n            }\n          })\n          .catch(err => {\n            if (err.response.status === 401) {\n              setPrevPwdTyping(true);\n              setPrevPwdState(false);\n            }\n          });\n      }\n    }, 2500);\n    setPrevPwdTimeout(timer);\n  };\n\n  const handleNewPwd = e => {\n    setValue({ ...value, newPwd: e.target.value });\n    if (!regex.test(e.target.value)) {\n      console.log('false');\n      setNewPwdState(false);\n    } else {\n      console.log('true');\n      setNewPwdState(true);\n    }\n  };\n  const handleNewPwdCheck = e => {\n    setValue({ ...value, newPwdCheck: e.target.value });\n    if (newPwdState && value.newPwd === e.target.value) {\n      setNewPwdCheckState(true);\n    } else {\n      setNewPwdCheckState(false);\n    }\n  };\n  useEffect(() => {\n    if (prevPwdState && newPwdCheckState) {\n      setAllOk(true);\n    }\n  }, [newPwdCheckState]);\n  const handleSubmit = () => {\n    //최종 변경\n    const getToken = localStorage.getItem('mydiary_token');\n    if (getToken) {\n      const config = {\n        access_token: getToken\n      };\n      const data = value;\n      console.log(value, 'last value');\n      updatePwd(config, data).then(res => {\n        if (res.status === 200 && res.data) {\n          alert('비밀번호 변경이 완료되었습니다.');\n        }\n      });\n    }\n  };\n  return (\n    <Con>\n      <Column>\n        <Row>\n          <TopCon>\n            <Row>\n              <MainTitle>비밀번호</MainTitle>\n              <PwEdit onClick={e => clickEditPw(e)}>비밀번호변경</PwEdit>\n            </Row>\n\n            {showEditPw && (\n              <>\n                <MarginTopRow>\n                  <Title>이전비밀번호</Title>\n                  <Input type=\"password\" name=\"prevPwd\" value={value.prevPwd} onChange={e => handlePrevPwd(e)} />\n                </MarginTopRow>\n\n                {prevPwdTyping && (prevPwdState ? <Match>일치</Match> : <Mismatch>일치하지 않습니다.</Mismatch>)}\n                <MarginRow>\n                  <Title>새비밀번호</Title>\n                  <Input type=\"password\" name=\"newPwd\" value={value.newPwd} onChange={e => handleNewPwd(e)} />\n                </MarginRow>\n                {!newPwdState ? <Mismatch>영문,숫자,특수문자포함 6~15자리로 입력해주세요.</Mismatch> : ''}\n\n                <MarginRow>\n                  <Title>새비밀번호 확인</Title>\n                  <Input\n                    type=\"password\"\n                    name=\"newPwdCheck\"\n                    value={value.newPwdCheck}\n                    onChange={e => handleNewPwdCheck(e)}\n                  />\n                </MarginRow>\n                {newPwdState &&\n                  value.newPwdCheck &&\n                  value.newPwdCheck.length > 0 &&\n                  (newPwdCheckState ? <Match>일치</Match> : <Mismatch>일치하지 않습니다.</Mismatch>)}\n                <Row>\n                  <SubmitBtn disabled={!newPwdCheckState} allOk={allOk} onClick={handleSubmit}>\n                    변경\n                  </SubmitBtn>\n                </Row>\n              </>\n            )}\n          </TopCon>\n        </Row>\n      </Column>\n    </Con>\n  );\n}\nconst Con = styled(Container)`\n  display: flex;\n  justify-content: center;\n`;\nconst Column = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n`;\nconst Row = styled.div`\n  display: flex;\n  width: 100%;\n`;\nconst MarginRow = styled(Row)`\n  margin-top: 20px;\n`;\nconst MarginTopRow = styled(Row)`\n  margin-top: 40px;\n`;\nconst Title = styled.div`\n  ${BasicTitle};\n  width: 120px;\n`;\nconst MainTitle = styled(Title)`\n  font-size: ${props => props.theme.mlFont};\n`;\nconst TopCon = styled.div`\n  width: 100%;\n  background: #fafafa;\n  padding: 30px;\n`;\nconst SubmitBtn = styled.button`\n  color: #aaa;\n  margin: 30px auto 0;\n  padding: 5px 10px;\n  font-size: ${theme.mFont};\n  ${props =>\n    props.allOk &&\n    css`\n      color: #111;\n      cursor: pointer;\n    `}\n`;\nconst Input = styled.input`\n  width: 150px;\n  height: 20px;\n`;\nconst PwEdit = styled.div`\n  ${BlueEditBtn}\n`;\nconst Match = styled.div`\n  color: ${theme.greenFont};\n  margin: 10px 0 0 0;\n  font-size: ${theme.sFont};\n  display: flex;\n  align-items: center;\n`;\nconst Mismatch = styled.div`\n  color: ${theme.redFont};\n  margin: 10px 0 0 0;\n  font-size: ${theme.sFont};\n  display: flex;\n  align-items: center;\n`;\n"]},"metadata":{},"sourceType":"module"}