{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/hj/develop/myproject/myDiary/client/src/containers/blog/PostContainer.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport React, { useState, useEffect } from 'react';\nimport DatePicker, { registerLocale } from 'react-datepicker';\nimport ko from 'date-fns/locale/ko';\nregisterLocale('ko', ko);\nimport styled from 'styled-components';\nimport Con from '../../components/common/Container';\nimport UploadComponent from '../../components/blog/ThreePhotoUpload';\nimport { setBlog, getCate } from '../../../src/api/blog';\nimport { BasicTitle, theme } from '../../utils/theme';\nimport Router from 'next/router';\nimport { setClickMenu, setCategory } from '../../actions/base';\nimport { set } from 'date-fns';\nexport default function addContainer(props) {\n  var _this = this;\n\n  var dispatch = useDispatch();\n\n  var _useState = useState(new Date()),\n      startDate = _useState[0],\n      setStartDate = _useState[1];\n\n  var _useState2 = useState(''),\n      imgFile = _useState2[0],\n      setImgFile = _useState2[1];\n\n  var _useState3 = useState({\n    cate: 0,\n    title: '',\n    location: '',\n    comment: ''\n  }),\n      value = _useState3[0],\n      setValue = _useState3[1];\n\n  var _useState4 = useState({}),\n      test = _useState4[0],\n      setTest = _useState4[1];\n\n  var userColor = useSelector(function (state) {\n    return state.common.userColor;\n  });\n  var clickMenu = useSelector(function (state) {\n    return state.common.clickMenu;\n  });\n  var category = useSelector(function (state) {\n    return state.common.category;\n  });\n\n  var handleData = function handleData(e) {\n    console.log(e, 'e');\n    setValue(_objectSpread({}, value, _defineProperty({}, e.target.name, e.target.value)));\n  }; // const handleDateChange = date => {\n  //   setStartDate(date);\n  // };\n\n\n  var checked = function checked(id) {\n    setValue(_objectSpread({}, value, {\n      cate: id\n    }));\n  };\n\n  console.log(clickMenu, 'clickMenu');\n\n  var _imgFormData = function imgFormData(file) {\n    setImgFile(file);\n  };\n\n  useEffect(function () {\n    var getToken = localStorage.getItem('mydiary_token');\n\n    if (getToken) {\n      var config = {\n        access_token: getToken\n      };\n      getCate(config).then(function (res) {\n        if (res.status === 200 && res.data) {\n          dispatch(setCategory(res.data.data));\n          console.log(res.data.data, 'rerere');\n        }\n      });\n    }\n  }, []);\n  useEffect(function () {\n    if (!category) {\n      return;\n    }\n\n    setValue({\n      cate: category[0].id,\n      title: '',\n      location: '',\n      comment: ''\n    });\n  }, [category]);\n\n  var submit = function submit() {\n    if (value.title.length > 0 && value.comment.length > 0) {\n      var existFileItems = imgFile.filter(function (item) {\n        return item !== null;\n      });\n      var formData = new FormData();\n      existFileItems && existFileItems.forEach(function (item) {\n        return formData.append(\"file\", item);\n      });\n      var data = value;\n      var numDate = Date.parse(startDate);\n      data.date = numDate;\n      formData.append('data', JSON.stringify(data));\n      console.log(formData, 'formdata');\n      console.log(startDate, 'start');\n      var getToken = localStorage.getItem('mydiary_token');\n\n      if (getToken) {\n        var config = {\n          access_token: getToken\n        };\n        setBlog(config, formData).then(function (res) {\n          console.log(res, 'res');\n\n          if (res.status === 200) {\n            alert('등록되었습니다.');\n            Router.push('/blog');\n            dispatch(setClickMenu({\n              cateId: value.cate\n            }));\n          }\n        });\n      }\n    } else {\n      alert('제목과 내용은 필수항목입니다.');\n    }\n  };\n\n  return __jsx(Contaniner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, __jsx(Subject, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, \"\\uBD84\\uB958\"), category && category.length > 0 && category.map(function (item, index) {\n    return __jsx(CateWrap, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 15\n      }\n    }, __jsx(\"label\", {\n      className: \"radio_container\",\n      key: index,\n      userColor: userColor,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }, item.title, __jsx(\"input\", {\n      type: \"radio\",\n      onChange: function onChange(e) {\n        return checked(item.id);\n      },\n      checked: item.id === value.cate,\n      autoComplete: \"off\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 19\n      }\n    }), __jsx(\"span\", {\n      className: \"checkmark\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 19\n      }\n    })));\n  })), __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, __jsx(Subject, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, \"\\uC81C\\uBAA9\"), __jsx(Input, {\n    type: \"text\",\n    name: \"title\",\n    value: value.title,\n    onChange: handleData,\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  })), __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, __jsx(Subject, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, \"\\uC7A5\\uC18C\"), __jsx(Input, {\n    type: \"text\",\n    name: \"location\",\n    value: value.location,\n    width: 150,\n    onChange: handleData,\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  })), __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, __jsx(Subject, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, \"\\uB0B4\\uC6A9\"), __jsx(CountRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, __jsx(CountComment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, value.comment && value.comment.length <= MAX_COMMENT ? value.comment.length : 0), __jsx(Slush, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }\n  }, \"/\"), __jsx(Maxcount, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, MAX_COMMENT))), __jsx(Textarea, {\n    type: \"text\",\n    maxLength: \"200\",\n    name: \"comment\",\n    value: value.comment,\n    onChange: handleData,\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  })), __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }, __jsx(Subject, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, \"\\uC0AC\\uC9C4\\uCCA8\\uBD80\"), __jsx(UploadComponent, {\n    imgFormData: function imgFormData(e) {\n      return _imgFormData(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  })), __jsx(RowRight, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }, __jsx(SubmitBtn, {\n    onClick: function onClick(e) {\n      return submit(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  }, \"\\uC800\\uC7A5\"))));\n}\nvar Contaniner = styled(Con).withConfig({\n  displayName: \"PostContainer__Contaniner\",\n  componentId: \"u8kmlp-0\"\n})([\"display:flex;flex-direction:column;\"]);\nvar CateWrap = styled.div.withConfig({\n  displayName: \"PostContainer__CateWrap\",\n  componentId: \"u8kmlp-1\"\n})([\"@media (max-width:768px){margin-top:15px;}\"]);\nvar Row = styled.div.withConfig({\n  displayName: \"PostContainer__Row\",\n  componentId: \"u8kmlp-2\"\n})([\"display:flex;justify-content:flex-start;padding:20px 15px;box-sizing:border-box;align-items:center;@media (max-width:768px){display:block;}.end{margin-left:auto;}.react-datepicker__input-container input{height:30px;font-size:15px;line-height:30px;padding-left:5px;background:#eee;outline:none;border:0;border-radius:5px;::placeholder{color:#000;}}.radio_container{display:block;position:relative;padding-left:30px;margin-right:30px;cursor:pointer;font-size:16px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.radio_container input{position:absolute;opacity:0;cursor:pointer;height:0;width:0;}.checkmark{position:absolute;top:0px;left:0;height:21px;width:21px;background:\", \";border-radius:50%;}.radio_container:hover input ~ .checkmark{background-color:\", \";}.radio_container input:checked ~ .checkmark{background-color:\", \";}.checkmark:after{content:'';position:absolute;display:none;}.radio_container input:checked ~ .checkmark:after{display:block;}.radio_container .checkmark:after{top:7px;left:7px;width:6px;height:6px;border-radius:50%;background:\", \";}\"], function (props) {\n  return props.userColor || '#aaa';\n}, function (props) {\n  return props.userColor || '#aaa';\n}, function (props) {\n  return props.userColor || '#aaa';\n}, function (props) {\n  return props.userColor || '#fff';\n});\nvar Col = styled.div.withConfig({\n  displayName: \"PostContainer__Col\",\n  componentId: \"u8kmlp-3\"\n})([\"display:inline-flex;svg:hover{fill:\", \";cursor:pointer;}\"], function (props) {\n  return props.userColor;\n});\nvar Subject = styled.div.withConfig({\n  displayName: \"PostContainer__Subject\",\n  componentId: \"u8kmlp-4\"\n})([\"margin-right:20px;white-space:pre;\", \"\"], BasicTitle);\nvar Input = styled.input.withConfig({\n  displayName: \"PostContainer__Input\",\n  componentId: \"u8kmlp-5\"\n})([\"height:30px;border:none;background:#eee;border-radius:5px;width:\", \"px;flex:\", \";@media screen and (max-width:768px){width:100%;margin-top:20px;}\"], function (props) {\n  return props.width;\n}, function (props) {\n  return !props.width && 1;\n});\nvar Textarea = styled.textarea.withConfig({\n  displayName: \"PostContainer__Textarea\",\n  componentId: \"u8kmlp-6\"\n})([\"flex:1;min-height:200px;@media screen and (max-width:768px){width:100%;margin-top:20px;}\"]);\nvar SubmitBtn = styled.button.withConfig({\n  displayName: \"PostContainer__SubmitBtn\",\n  componentId: \"u8kmlp-7\"\n})([\"padding:5px 10px;cursor:pointer;font-size:16px;\"]);\nvar RowRight = styled(Row).withConfig({\n  displayName: \"PostContainer__RowRight\",\n  componentId: \"u8kmlp-8\"\n})([\"justify-content:center;\"]);\nvar CountRow = styled.div.withConfig({\n  displayName: \"PostContainer__CountRow\",\n  componentId: \"u8kmlp-9\"\n})([\"display:flex;margin:10px 20px 0 0;\"]);\nvar CountComment = styled.div.withConfig({\n  displayName: \"PostContainer__CountComment\",\n  componentId: \"u8kmlp-10\"\n})([\"color:#aaa;font-size:\", \";\"], theme.sFont);\nvar Slush = styled.div.withConfig({\n  displayName: \"PostContainer__Slush\",\n  componentId: \"u8kmlp-11\"\n})([\"color:#aaa;margin:0 2px 0;font-size:\", \";\"], theme.sFont);\nvar Maxcount = styled.span.withConfig({\n  displayName: \"PostContainer__Maxcount\",\n  componentId: \"u8kmlp-12\"\n})([\"color:#aaa;font-size:\", \";\"], theme.sFont);\nvar MAX_COMMENT = 200;","map":{"version":3,"sources":["/Users/hj/develop/myproject/myDiary/client/src/containers/blog/PostContainer.js"],"names":["useSelector","useDispatch","React","useState","useEffect","DatePicker","registerLocale","ko","styled","Con","UploadComponent","setBlog","getCate","BasicTitle","theme","Router","setClickMenu","setCategory","set","addContainer","props","dispatch","Date","startDate","setStartDate","imgFile","setImgFile","cate","title","location","comment","value","setValue","test","setTest","userColor","state","common","clickMenu","category","handleData","e","console","log","target","name","checked","id","imgFormData","file","getToken","localStorage","getItem","config","access_token","then","res","status","data","submit","length","existFileItems","filter","item","formData","FormData","forEach","append","numDate","parse","date","JSON","stringify","alert","push","cateId","map","index","MAX_COMMENT","Contaniner","CateWrap","div","Row","Col","Subject","Input","input","width","Textarea","textarea","SubmitBtn","button","RowRight","CountRow","CountComment","sFont","Slush","Maxcount","span"],"mappings":"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","sourcesContent":["import { useSelector, useDispatch } from 'react-redux';\nimport React, { useState, useEffect } from 'react';\nimport DatePicker, { registerLocale } from 'react-datepicker';\nimport ko from 'date-fns/locale/ko';\nregisterLocale('ko', ko);\n\nimport styled from 'styled-components';\nimport Con from '../../components/common/Container';\nimport UploadComponent from '../../components/blog/ThreePhotoUpload';\nimport { setBlog, getCate } from '../../../src/api/blog';\nimport { BasicTitle, theme } from '../../utils/theme';\nimport Router from 'next/router';\nimport { setClickMenu, setCategory } from '../../actions/base';\nimport { set } from 'date-fns';\n\nexport default function addContainer(props) {\n  const dispatch = useDispatch();\n  const [startDate, setStartDate] = useState(new Date());\n  const [imgFile, setImgFile] = useState('');\n  const [value, setValue] = useState({\n    cate: 0,\n    title: '',\n    location: '',\n    comment: ''\n  });\n  const [test, setTest] = useState({});\n  const userColor = useSelector(state => state.common.userColor);\n  const clickMenu = useSelector(state => state.common.clickMenu);\n  const category = useSelector(state => state.common.category);\n\n  const handleData = e => {\n    console.log(e, 'e');\n    setValue({ ...value, [e.target.name]: e.target.value });\n  };\n\n  // const handleDateChange = date => {\n  //   setStartDate(date);\n  // };\n\n  const checked = id => {\n    setValue({ ...value, cate: id });\n  };\n  console.log(clickMenu, 'clickMenu');\n  const imgFormData = file => {\n    setImgFile(file);\n  };\n\n  useEffect(() => {\n    const getToken = localStorage.getItem('mydiary_token');\n    if (getToken) {\n      const config = {\n        access_token: getToken\n      };\n      getCate(config).then(res => {\n        if (res.status === 200 && res.data) {\n          dispatch(setCategory(res.data.data));\n          console.log(res.data.data, 'rerere');\n        }\n      });\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!category) {\n      return;\n    }\n    setValue({ cate: category[0].id, title: '', location: '', comment: '' });\n  }, [category]);\n\n  const submit = () => {\n    if (value.title.length > 0 && value.comment.length > 0) {\n      const existFileItems = imgFile.filter(item => item !== null);\n      const formData = new FormData();\n\n      existFileItems && existFileItems.forEach(item => formData.append(`file`, item));\n      const data = value;\n      const numDate = Date.parse(startDate);\n      data.date = numDate;\n      formData.append('data', JSON.stringify(data));\n      console.log(formData, 'formdata');\n      console.log(startDate, 'start');\n\n      const getToken = localStorage.getItem('mydiary_token');\n      if (getToken) {\n        const config = {\n          access_token: getToken\n        };\n        setBlog(config, formData).then(res => {\n          console.log(res, 'res');\n          if (res.status === 200) {\n            alert('등록되었습니다.');\n            Router.push('/blog');\n            dispatch(setClickMenu({ cateId: value.cate }));\n          }\n        });\n      }\n    } else {\n      alert('제목과 내용은 필수항목입니다.');\n    }\n  };\n\n  return (\n    <Contaniner>\n      <Row>\n        <Subject>분류</Subject>\n        {category &&\n          category.length > 0 &&\n          category.map((item, index) => {\n            return (\n              <CateWrap>\n                <label className=\"radio_container\" key={index} userColor={userColor}>\n                  {item.title}\n                  <input\n                    type=\"radio\"\n                    onChange={e => checked(item.id)}\n                    checked={item.id === value.cate}\n                    autoComplete=\"off\"\n                  />\n                  <span className=\"checkmark\" />\n                </label>\n              </CateWrap>\n            );\n          })}\n      </Row>\n      <Row>\n        <Subject>제목</Subject>\n        <Input type=\"text\" name=\"title\" value={value.title} onChange={handleData} autoComplete=\"off\" />\n      </Row>\n      {/* <Row>\n        <Subject>날짜</Subject>\n        <DatePicker\n          name=\"date\"\n          selected={startDate}\n          onChange={handleDateChange}\n          dateFormat=\"Pp\"\n          locale=\"ko\"\n          showTimeSelect\n          timeFormat=\"HH:mm\"\n          showPopperArrow={false}\n          showPopperArrow={false}\n          timeIntervals={30}\n          dateFormat=\"yyyy/MM/dd aa hh:mm\"\n          placeholderText=\"날짜 선택\"\n        />\n      </Row> */}\n      <Row>\n        <Subject>장소</Subject>\n        <Input\n          type=\"text\"\n          name=\"location\"\n          value={value.location}\n          width={150}\n          onChange={handleData}\n          autoComplete=\"off\"\n        />\n      </Row>\n      <Row>\n        <div>\n          <Subject>내용</Subject>\n          <CountRow>\n            <CountComment>\n              {value.comment && value.comment.length <= MAX_COMMENT ? value.comment.length : 0}\n            </CountComment>\n            <Slush>/</Slush>\n            <Maxcount>{MAX_COMMENT}</Maxcount>\n          </CountRow>\n        </div>\n        <Textarea\n          type=\"text\"\n          maxLength=\"200\"\n          name=\"comment\"\n          value={value.comment}\n          onChange={handleData}\n          autoComplete=\"off\"\n        />\n      </Row>\n      <Row>\n        <Subject>사진첨부</Subject>\n        <UploadComponent imgFormData={e => imgFormData(e)} />\n      </Row>\n      <RowRight>\n        <Col>\n          <SubmitBtn onClick={e => submit(e)}>저장</SubmitBtn>\n        </Col>\n      </RowRight>\n    </Contaniner>\n  );\n}\nconst Contaniner = styled(Con)`\n  display: flex;\n  flex-direction: column;\n`;\nconst CateWrap = styled.div`\n  @media (max-width: 768px) {\n    margin-top: 15px;\n  }\n`;\nconst Row = styled.div`\n  display: flex;\n  justify-content: flex-start;\n  padding: 20px 15px;\n  box-sizing: border-box;\n  align-items: center;\n  @media (max-width: 768px) {\n    display: block;\n  }\n  .end {\n    margin-left: auto;\n  }\n  .react-datepicker__input-container input {\n    height: 30px;\n    font-size: 15px;\n    line-height: 30px;\n    padding-left: 5px;\n    background: #eee;\n    outline: none;\n    border: 0;\n    border-radius: 5px;\n    ::placeholder {\n      color: #000;\n    }\n  }\n  .radio_container {\n    display: block;\n    position: relative;\n    padding-left: 30px;\n    margin-right: 30px;\n    cursor: pointer;\n    font-size: 16px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n  .radio_container input {\n    position: absolute;\n    opacity: 0;\n    cursor: pointer;\n    height: 0;\n    width: 0;\n  }\n  .checkmark {\n    position: absolute;\n    top: 0px;\n    left: 0;\n    height: 21px;\n    width: 21px;\n    background: ${props => props.userColor || '#aaa'};\n    border-radius: 50%;\n  }\n  .radio_container:hover input ~ .checkmark {\n    background-color: ${props => props.userColor || '#aaa'};\n  }\n  .radio_container input:checked ~ .checkmark {\n    background-color: ${props => props.userColor || '#aaa'};\n  }\n  .checkmark:after {\n    content: '';\n    position: absolute;\n    display: none;\n  }\n  .radio_container input:checked ~ .checkmark:after {\n    display: block;\n  }\n  .radio_container .checkmark:after {\n    top: 7px;\n    left: 7px;\n    width: 6px;\n    height: 6px;\n    border-radius: 50%;\n    background: ${props => props.userColor || '#fff'};\n  }\n`;\nconst Col = styled.div`\n  display: inline-flex;\n  svg:hover {\n    fill: ${props => props.userColor};\n    cursor: pointer;\n  }\n`;\nconst Subject = styled.div`\n  margin-right: 20px;\n  white-space: pre;\n  ${BasicTitle}\n`;\nconst Input = styled.input`\n  /* flex: 1; */\n  height: 30px;\n  border: none;\n  background: #eee;\n  border-radius: 5px;\n  width: ${props => props.width}px;\n  flex: ${props => !props.width && 1};\n  @media screen and (max-width: 768px) {\n    width: 100%;\n    margin-top: 20px;\n  }\n`;\nconst Textarea = styled.textarea`\n  flex: 1;\n  min-height: 200px;\n  @media screen and (max-width: 768px) {\n    width: 100%;\n    margin-top: 20px;\n  }\n`;\nconst SubmitBtn = styled.button`\n  padding: 5px 10px;\n  cursor: pointer;\n  font-size: 16px;\n`;\nconst RowRight = styled(Row)`\n  justify-content: center;\n`;\nconst CountRow = styled.div`\n  display: flex;\n  margin: 10px 20px 0 0;\n`;\nconst CountComment = styled.div`\n  color: #aaa;\n  font-size: ${theme.sFont};\n`;\nconst Slush = styled.div`\n  color: #aaa;\n  margin: 0 2px 0;\n  font-size: ${theme.sFont};\n`;\nconst Maxcount = styled.span`\n  color: #aaa;\n  font-size: ${theme.sFont};\n`;\nconst MAX_COMMENT = 200;\n"]},"metadata":{},"sourceType":"module"}