{"ast":null,"code":"var _jsxFileName = \"/Users/hj/develop/myproject/myDiary/client/src/containers/blog/PostContainer.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useSelector } from 'react-redux';\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport DatePicker, { registerLocale } from 'react-datepicker';\nimport ko from 'date-fns/locale/ko';\nimport styled from 'styled-components';\nimport Con from '../../components/common/Container';\nimport Button from '../../components/common/Button';\nimport UploadComponent from '../../components/blog/ThreePhotoUpload';\nimport { setBlog, getCate } from '../../../src/api/blog';\nregisterLocale('ko', ko);\nexport default function addContainer() {\n  const {\n    0: startDate,\n    1: setStartDate\n  } = useState(new Date());\n  const {\n    0: category,\n    1: setCategory\n  } = useState([]);\n  const {\n    0: radioIndex,\n    1: setRadioIndex\n  } = useState(0);\n  const {\n    0: imgFile,\n    1: setImgFile\n  } = useState('');\n  const {\n    0: value,\n    1: setValue\n  } = useState({\n    cate: 0,\n    title: '',\n    location: '',\n    comment: ''\n  });\n  const userColor = useSelector(state => state.common.userColor); // const category = useSelector(state => state.common.category);\n\n  console.log(category);\n\n  const handleData = e => {\n    console.log(e, 'e');\n    setValue(_objectSpread({}, value, {\n      [e.target.name]: e.target.value\n    }));\n  }; // const handleDateChange = date => {\n  //   setStartDate(date);\n  // };\n\n\n  const checked = (id, index) => {\n    setRadioIndex(index);\n    setValue(_objectSpread({}, value, {\n      cate: id\n    }));\n  };\n\n  const imgFormData = file => {\n    setImgFile(file);\n  };\n\n  console.log(value, 'value');\n  useEffect(() => {\n    const getToken = localStorage.getItem('mydiary_token');\n\n    if (getToken) {\n      const config = {\n        access_token: getToken\n      };\n      console.log('ion');\n      getCate(config).then(res => {\n        console.log('in');\n\n        if (res.status === 200 && res.data) {\n          console.log(res, 'res');\n          setCategory(res.data.data);\n        }\n      });\n    }\n  }, []);\n\n  const submit = () => {\n    if (value.title.length > 0 && value.comment.length > 0) {\n      const existFileItems = imgFile.filter(item => item !== null);\n      const formData = new FormData();\n      existFileItems && existFileItems.forEach(item => formData.append(`file`, item));\n      const data = value;\n      const numDate = Date.parse(startDate);\n      data.date = numDate;\n      data.cate = category && category[radioIndex].id;\n      formData.append('data', JSON.stringify(data));\n      console.log(formData, 'formdata');\n      console.log(startDate, 'start');\n      const getToken = localStorage.getItem('mydiary_token');\n\n      if (getToken) {\n        const config = {\n          access_token: getToken\n        };\n        setBlog(config, formData).then(res => {\n          console.log(res, 'res'); // if (res.status === 200 && res.data) {\n          //   console.log(res.data, 'post data');\n          // }\n        });\n      }\n    } else {\n      alert('제목과 내용은 필수항목입니다.');\n    }\n  };\n\n  console.log(value, 'value');\n  return __jsx(Contaniner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, __jsx(Subject, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, \"\\uBD84\\uB958\"), __jsx(CateWrap, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, category && category.length > 0 && category.map((item, index) => {\n    return __jsx(\"label\", {\n      className: \"radio_container\",\n      key: index,\n      userColor: userColor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, item.title, __jsx(\"input\", {\n      type: \"radio\",\n      onChange: e => checked(item.id, index),\n      checked: radioIndex === index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 19\n      }\n    }), __jsx(\"span\", {\n      className: \"checkmark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 19\n      }\n    }));\n  }))), __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, __jsx(Subject, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, \"\\uC81C\\uBAA9\"), __jsx(Input, {\n    type: \"text\",\n    name: \"title\",\n    value: value.title,\n    onChange: handleData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  })), __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, __jsx(Subject, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, \"\\uC7A5\\uC18C\"), __jsx(\"input\", {\n    type: \"text\",\n    name: \"location\",\n    value: value.location,\n    onChange: handleData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  })), __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, __jsx(Subject, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, \"\\uB0B4\\uC6A9(200\\uC790)\"), __jsx(Textarea, {\n    type: \"text\",\n    maxLength: \"200\",\n    name: \"comment\",\n    value: value.comment,\n    onChange: handleData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  })), __jsx(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }\n  }, __jsx(Subject, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, \"\\uC0AC\\uC9C4\\uCCA8\\uBD80\"), __jsx(UploadComponent, {\n    imgFormData: e => imgFormData(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  })), __jsx(RowRight, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }, __jsx(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, __jsx(SubmitBtn, {\n    onClick: e => submit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, \"\\uC800\\uC7A5\"))));\n}\nconst Contaniner = styled(Con).withConfig({\n  displayName: \"PostContainer__Contaniner\",\n  componentId: \"u8kmlp-0\"\n})([\"display:flex;flex-direction:column;margin-top:30px;\"]);\nconst CateWrap = styled.div.withConfig({\n  displayName: \"PostContainer__CateWrap\",\n  componentId: \"u8kmlp-1\"\n})([\"display:block;\"]);\nconst Row = styled.div.withConfig({\n  displayName: \"PostContainer__Row\",\n  componentId: \"u8kmlp-2\"\n})([\"display:flex;justify-content:flex-start;padding:20px 15px;box-sizing:border-box;align-items:center;.end{margin-left:auto;}.react-datepicker__input-container input{height:30px;font-size:15px;line-height:30px;padding-left:5px;background:#eee;outline:none;border:0;border-radius:5px;::placeholder{color:#000;}}.radio_container{display:block;position:relative;padding-left:30px;margin-right:30px;cursor:pointer;font-size:16px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.radio_container input{position:absolute;opacity:0;cursor:pointer;height:0;width:0;}.checkmark{position:absolute;top:0px;left:0;height:21px;width:21px;background:\", \";border-radius:50%;}.radio_container:hover input ~ .checkmark{background-color:\", \";}.radio_container input:checked ~ .checkmark{background-color:\", \";}.checkmark:after{content:'';position:absolute;display:none;}.radio_container input:checked ~ .checkmark:after{display:block;}.radio_container .checkmark:after{top:7px;left:7px;width:6px;height:6px;border-radius:50%;background:\", \";}\"], props => props.userColor || '#aaa', props => props.userColor || '#aaa', props => props.userColor || '#aaa', props => props.userColor || '#fff');\nconst Col = styled.div.withConfig({\n  displayName: \"PostContainer__Col\",\n  componentId: \"u8kmlp-3\"\n})([\"display:inline-flex;svg:hover{fill:\", \";cursor:pointer;}\"], props => props.userColor);\nconst Subject = styled.div.withConfig({\n  displayName: \"PostContainer__Subject\",\n  componentId: \"u8kmlp-4\"\n})([\"margin-right:20px;white-space:pre;\"]);\nconst Input = styled.input.withConfig({\n  displayName: \"PostContainer__Input\",\n  componentId: \"u8kmlp-5\"\n})([\"flex:1;height:30px;border:none;background:#eee;border-radius:5px;\"]);\nconst Textarea = styled.textarea.withConfig({\n  displayName: \"PostContainer__Textarea\",\n  componentId: \"u8kmlp-6\"\n})([\"flex:1;min-height:200px;\"]);\nconst SubmitBtn = styled.button.withConfig({\n  displayName: \"PostContainer__SubmitBtn\",\n  componentId: \"u8kmlp-7\"\n})([\"padding:5px 10px;cursor:pointer;font-size:16px;\"]);\nconst RowRight = styled(Row).withConfig({\n  displayName: \"PostContainer__RowRight\",\n  componentId: \"u8kmlp-8\"\n})([\"justify-content:center;\"]);","map":{"version":3,"sources":["/Users/hj/develop/myproject/myDiary/client/src/containers/blog/PostContainer.js"],"names":["useSelector","React","useState","useEffect","axios","DatePicker","registerLocale","ko","styled","Con","Button","UploadComponent","setBlog","getCate","addContainer","startDate","setStartDate","Date","category","setCategory","radioIndex","setRadioIndex","imgFile","setImgFile","value","setValue","cate","title","location","comment","userColor","state","common","console","log","handleData","e","target","name","checked","id","index","imgFormData","file","getToken","localStorage","getItem","config","access_token","then","res","status","data","submit","length","existFileItems","filter","item","formData","FormData","forEach","append","numDate","parse","date","JSON","stringify","alert","map","Contaniner","CateWrap","div","Row","props","Col","Subject","Input","input","Textarea","textarea","SubmitBtn","button","RowRight"],"mappings":"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","sourcesContent":["import { useSelector } from 'react-redux';\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport DatePicker, { registerLocale } from 'react-datepicker';\nimport ko from 'date-fns/locale/ko';\n\nimport styled from 'styled-components';\nimport Con from '../../components/common/Container';\nimport Button from '../../components/common/Button';\nimport UploadComponent from '../../components/blog/ThreePhotoUpload';\nimport { setBlog, getCate } from '../../../src/api/blog';\nregisterLocale('ko', ko);\n\nexport default function addContainer() {\n  const [startDate, setStartDate] = useState(new Date());\n  const [category, setCategory] = useState([]);\n  const [radioIndex, setRadioIndex] = useState(0);\n  const [imgFile, setImgFile] = useState('');\n  const [value, setValue] = useState({\n    cate: 0,\n    title: '',\n    location: '',\n    comment: ''\n  });\n  const userColor = useSelector(state => state.common.userColor);\n  // const category = useSelector(state => state.common.category);\n\n  console.log(category);\n  const handleData = e => {\n    console.log(e, 'e');\n    setValue({ ...value, [e.target.name]: e.target.value });\n  };\n\n  // const handleDateChange = date => {\n  //   setStartDate(date);\n  // };\n\n  const checked = (id, index) => {\n    setRadioIndex(index);\n    setValue({ ...value, cate: id });\n  };\n\n  const imgFormData = file => {\n    setImgFile(file);\n  };\n  console.log(value, 'value');\n  useEffect(() => {\n    const getToken = localStorage.getItem('mydiary_token');\n    if (getToken) {\n      const config = {\n        access_token: getToken\n      };\n      console.log('ion');\n      getCate(config).then(res => {\n        console.log('in');\n        if (res.status === 200 && res.data) {\n          console.log(res, 'res');\n          setCategory(res.data.data);\n        }\n      });\n    }\n  }, []);\n  const submit = () => {\n    if (value.title.length > 0 && value.comment.length > 0) {\n      const existFileItems = imgFile.filter(item => item !== null);\n      const formData = new FormData();\n\n      existFileItems && existFileItems.forEach(item => formData.append(`file`, item));\n      const data = value;\n      const numDate = Date.parse(startDate);\n      data.date = numDate;\n      data.cate = category && category[radioIndex].id;\n      formData.append('data', JSON.stringify(data));\n      console.log(formData, 'formdata');\n      console.log(startDate, 'start');\n\n      const getToken = localStorage.getItem('mydiary_token');\n      if (getToken) {\n        const config = {\n          access_token: getToken\n        };\n        setBlog(config, formData).then(res => {\n          console.log(res, 'res');\n          // if (res.status === 200 && res.data) {\n          //   console.log(res.data, 'post data');\n          // }\n        });\n      }\n    } else {\n      alert('제목과 내용은 필수항목입니다.');\n    }\n  };\n  console.log(value, 'value');\n  return (\n    <Contaniner>\n      <Row>\n        <Subject>분류</Subject>\n        <CateWrap>\n          {category &&\n            category.length > 0 &&\n            category.map((item, index) => {\n              return (\n                <label className=\"radio_container\" key={index} userColor={userColor}>\n                  {item.title}\n                  <input type=\"radio\" onChange={e => checked(item.id, index)} checked={radioIndex === index} />\n                  <span className=\"checkmark\" />\n                </label>\n              );\n            })}\n        </CateWrap>\n      </Row>\n      <Row>\n        <Subject>제목</Subject>\n        <Input type=\"text\" name=\"title\" value={value.title} onChange={handleData} />\n      </Row>\n      {/* <Row>\n        <Subject>날짜</Subject>\n        <DatePicker\n          name=\"date\"\n          selected={startDate}\n          onChange={handleDateChange}\n          dateFormat=\"Pp\"\n          locale=\"ko\"\n          showTimeSelect\n          timeFormat=\"HH:mm\"\n          showPopperArrow={false}\n          showPopperArrow={false}\n          timeIntervals={30}\n          dateFormat=\"yyyy/MM/dd aa hh:mm\"\n          placeholderText=\"날짜 선택\"\n        />\n      </Row> */}\n      <Row>\n        <Subject>장소</Subject>\n        <input type=\"text\" name=\"location\" value={value.location} onChange={handleData} />\n      </Row>\n      <Row>\n        <Subject>내용(200자)</Subject>\n        <Textarea type=\"text\" maxLength=\"200\" name=\"comment\" value={value.comment} onChange={handleData} />\n      </Row>\n      <Row>\n        <Subject>사진첨부</Subject>\n        <UploadComponent imgFormData={e => imgFormData(e)} />\n      </Row>\n      <RowRight>\n        <Col>\n          <SubmitBtn onClick={e => submit(e)}>저장</SubmitBtn>\n        </Col>\n      </RowRight>\n    </Contaniner>\n  );\n}\nconst Contaniner = styled(Con)`\n  display: flex;\n  flex-direction: column;\n  margin-top: 30px;\n`;\nconst CateWrap = styled.div`\n  display: block;\n`;\nconst Row = styled.div`\n  display: flex;\n  justify-content: flex-start;\n  padding: 20px 15px;\n  box-sizing: border-box;\n  align-items: center;\n  .end {\n    margin-left: auto;\n  }\n  .react-datepicker__input-container input {\n    height: 30px;\n    font-size: 15px;\n    line-height: 30px;\n    padding-left: 5px;\n    background: #eee;\n    outline: none;\n    border: 0;\n    border-radius: 5px;\n    ::placeholder {\n      color: #000;\n    }\n  }\n  /* Customize the label (the container) */\n  .radio_container {\n    display: block;\n    position: relative;\n    padding-left: 30px;\n    margin-right: 30px;\n    cursor: pointer;\n    font-size: 16px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n\n  /* Hide the browser's default radio button */\n  .radio_container input {\n    position: absolute;\n    opacity: 0;\n    cursor: pointer;\n    height: 0;\n    width: 0;\n  }\n\n  /* Create a custom radio button */\n  .checkmark {\n    position: absolute;\n    top: 0px;\n    left: 0;\n    height: 21px;\n    width: 21px;\n    background: ${props => props.userColor || '#aaa'};\n    border-radius: 50%;\n  }\n\n  /* On mouse-over, add a grey background color */\n  .radio_container:hover input ~ .checkmark {\n    background-color: ${props => props.userColor || '#aaa'};\n  }\n\n  /* When the radio button is checked, add a blue background */\n  .radio_container input:checked ~ .checkmark {\n    background-color: ${props => props.userColor || '#aaa'};\n  }\n\n  /* Create the indicator (the dot/circle - hidden when not checked) */\n  .checkmark:after {\n    content: '';\n    position: absolute;\n    display: none;\n  }\n\n  /* Show the indicator (dot/circle) when checked */\n  .radio_container input:checked ~ .checkmark:after {\n    display: block;\n  }\n\n  /* Style the indicator (dot/circle) */\n  .radio_container .checkmark:after {\n    top: 7px;\n    left: 7px;\n    width: 6px;\n    height: 6px;\n    border-radius: 50%;\n    background: ${props => props.userColor || '#fff'};\n  }\n  /* .check_container {\n    display: block;\n    position: relative;\n    padding-left: 25px;\n    margin-right: 15px;\n    cursor: pointer;\n    font-size: 16px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n  //check box\n  /* Hide the browser's default checkbox */\n`;\nconst Col = styled.div`\n  display: inline-flex;\n  svg:hover {\n    fill: ${props => props.userColor};\n    cursor: pointer;\n  }\n`;\nconst Subject = styled.div`\n  margin-right: 20px;\n  white-space: pre;\n`;\nconst Input = styled.input`\n  flex: 1;\n  height: 30px;\n  border: none;\n  background: #eee;\n  border-radius: 5px;\n`;\nconst Textarea = styled.textarea`\n  flex: 1;\n  min-height: 200px;\n`;\nconst SubmitBtn = styled.button`\n  padding: 5px 10px;\n  cursor: pointer;\n  font-size: 16px;\n`;\nconst RowRight = styled(Row)`\n  justify-content: center;\n`;\n"]},"metadata":{},"sourceType":"module"}