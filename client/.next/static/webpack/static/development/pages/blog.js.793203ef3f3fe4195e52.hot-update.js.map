{"version":3,"file":"static/webpack/static/development/pages/blog.js.793203ef3f3fe4195e52.hot-update.js","sources":["webpack:///./src/components/blog/List.js","webpack:///./src/containers/blog/ListContainer.js"],"sourcesContent":["import styled from 'styled-components';\nimport { it } from 'date-fns/locale';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { theme } from '../../utils/theme';\nimport moment from 'moment';\nimport Carousel from 'nuka-carousel';\n\nexport default function List(props) {\n  const { luminantColor, blogData, deleteItem, handleMenuClick } = props;\n  const userColor = useSelector(state => state.common.userColor);\n  const clickMenu = useSelector(state => state.common.clickMenu);\n\n  return (\n    <ListArea>\n      <Content>\n        {blogData &&\n          blogData.length > 0 &&\n          blogData.map((item, index) => {\n            // console.log(blogData, 'blog');\n            const date = item.now_date ? item.now_date : '';\n            // console.log(date, 'date');\n            var stillUtc = moment.utc(date).format();\n            // const stillUtc = momentz\n            const convertedDate = moment(stillUtc).format('YYYY월 M월 D일');\n            return (\n              <CardContainer key={index} luminantColor={luminantColor} userColor={userColor}>\n                <IconCloseCon onClick={() => deleteItem(item.id, item.image_url)}>\n                  <IconCloseImg src={'/images/close.svg'} />\n                </IconCloseCon>\n                <ImageArea>\n                  <Carousel\n                    defaultControlsConfig={{\n                      nextButtonText: '>',\n                      prevButtonText: '<',\n                      pagingDotsStyle: {\n                        fill: '#ddd'\n                      }\n                    }}\n                    heightMode=\"current\"\n                  >\n                    {item &&\n                      item.image_url.map(item => {\n                        return <Img src={item} />;\n                      })}\n                  </Carousel>\n                </ImageArea>\n                <ContentArea>\n                  <Date>{item.now_date ? `작성일 ${convertedDate}` : ''}</Date>\n                  <Title>{item.title}</Title>\n                  <Comment>{item.comment}</Comment>\n                  <Location>\n                    {item.location_name && <Location_icon src={'/images/location.png'} />}\n                    {item.location_name}\n                  </Location>\n                </ContentArea>\n              </CardContainer>\n            );\n          })}\n        {blogData && blogData.length === 0 && (\n          <Col>\n            <AllViewWrap>\n              <AllView onClick={() => handleMenuClick(clickMenu.cateId)} userColor={userColor}>\n                전체보기\n              </AllView>\n            </AllViewWrap>\n            <WriteWrap>\n              <Write>첫번째 글을 작성해보세요.</Write>\n              <WriteImg src={'/images/keyboard.png'} />\n            </WriteWrap>\n          </Col>\n        )}\n      </Content>\n    </ListArea>\n  );\n}\nconst ListArea = styled.div`\n  width: 100%;\n  height: 100%;\n`;\nconst Content = styled.section`\n  padding: 0 40px 40px;\n  box-sizing: border-box;\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n`;\n\nconst CardContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin: 0 0 30px;\n  width: 100%;\n  padding: 30px;\n  box-sizing: border-box;\n  border-top: 2px dotted ${props => (props.userColor ? props.userColor : '#ddd')};\n  background: #f6f6f6;\n  border-radius: 5px;\n  position: relative;\n`;\nconst ImageArea = styled.div`\n  width: 100%;\n  height: 100%;\n  margin-bottom: 10px;\n`;\nconst Img = styled.img`\n  width: 100%;\n  height: 100%;\n`;\nconst ContentArea = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n`;\nconst Date = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  font-size: 13px;\n  color: #aaa;\n`;\nconst Title = styled.div`\n  font-size: 21px; //theme big\n  font-weight: bold;\n  margin-top: 10px;\n`;\nconst Comment = styled.div`\n  font-size: 15px;\n  margin-top: 10px;\n  line-height: 1.4;\n`;\nconst Location = styled.div`\n  color: #6da3f7;\n  font-size: 13px;\n  margin-top: 15px;\n  display: flex;\n  align-items: center;\n`;\nconst Location_icon = styled.img`\n  width: 14px;\n  height: 14px;\n`;\nconst WriteWrap = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\nconst Write = styled.div`\n  font-size: ${theme.mFont};\n  color: #ccc;\n  margin: 200px 0 10px;\n`;\nconst WriteImg = styled.img`\n  max-width: 80px;\n  max-height: 80px;\n`;\nconst IconCloseCon = styled.div`\n  position: absolute;\n  top: -6px;\n  right: -6px;\n  width: 20px;\n  height: 20px;\n  background-color: #ddd;\n  border-radius: 12px;\n  cursor: pointer;\n  :hover {\n    opacity: 0.5;\n  }\n`;\nconst IconCloseImg = styled.img`\n  position: absolute;\n  top: 3px;\n  left: 3px;\n`;\nconst Col = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\nconst AllViewWrap = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 40px;\n`;\nconst AllView = styled.div`\n  color: ${props => props.userColor && props.userColor};\n  font-size: ${theme.mFont};\n  cursor: pointer;\n`;\n","import { useSelector, useDispatch } from 'react-redux';\nimport { useState, useEffect, useCallback } from 'react';\nimport styled from 'styled-components';\nimport MyList from '../../components/blog/List';\nimport Menu from '../../components/blog/Menu';\nimport { colorLuminance } from '../../utils/common';\nimport { setCategory, setClickMenu } from '../../actions/base';\nimport { getCate, getBlog, getSearchedBlog, deleteBlog } from '../../api/blog';\nimport Search from '../../components/blog/Search';\n\nexport default function ListContainer() {\n  const dispatch = useDispatch();\n  const userColor = useSelector(state => state.common.userColor);\n  const luminantColor = userColor && colorLuminance(userColor, 0.5);\n  const userInfo = useSelector(state => state.common.userInfo);\n  const category = useSelector(state => state.common.category);\n  const clickMenu = useSelector(state => state.common.clickMenu);\n\n  const [menuIndex, setMenuIndex] = useState(0);\n  const [isSticky, setSticky] = useState(false);\n  const [loadMore, setLoadMore] = useState(true);\n  const [selectedCateId, setSelectedCateId] = useState();\n  const [blogData, setBlogData] = useState(undefined);\n  const [sendToListValue, setSendToListValue] = useState('');\n\n  const handleScroll = () => {\n    if (window.pageYOffset >= 150) {\n      setSticky(true);\n    } else {\n      setSticky(false);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, []);\n\n  useEffect(() => {\n    const getToken = localStorage.getItem('mydiary_token');\n    if (getToken) {\n      const config = {\n        access_token: getToken\n      };\n      getCate(config).then(res => {\n        if (res.status === 200 && res.data) {\n          dispatch(setCategory(res.data.data));\n          clickMenu && dispatch(setClickMenu({ cateId: res.data.data[0].id }));\n        }\n      });\n    }\n  }, []);\n  console.log(clickMenu, 'clickMenu');\n\n  const handleMenuClick = cateId => {\n    const storedToken = localStorage.getItem('mydiary_token') && localStorage.getItem('mydiary_token');\n    const config = {\n      access_token: storedToken\n    };\n    getBlog(config, cateId).then(res => {\n      if (res.status === 200) {\n        console.log(res.data, 'clickMenu res.data');\n        setBlogData(res.data.data);\n        dispatch(setClickMenu({ cateId }));\n      }\n    });\n  };\n\n  const getSearch = value => {\n    if (blogData && blogData.length !== 0 && value !== '') {\n      const storedToken = localStorage.getItem('mydiary_token') && localStorage.getItem('mydiary_token');\n      const config = {\n        access_token: storedToken\n      };\n      console.log(clickMenu.cateId, 'clickMenu.cateId');\n      getSearchedBlog(config, clickMenu && clickMenu.cateId, value).then(res => {\n        if (res.status === 200) {\n          setBlogData(res.data.data);\n          setSendToListValue(value);\n        }\n      });\n    }\n  };\n  const deleteItem = (id, imageName) => {\n    console.log(id, imageName, 'im');\n    const getToken = localStorage.getItem('mydiary_token');\n    if (getToken) {\n      const config = {\n        access_token: getToken\n      };\n      const data = { id, image_url: imageName };\n      deleteBlog(config, data).then(res => {\n        if (res.status === 200 && res.data) {\n          console.log(res, 'res dele');\n        }\n      });\n    }\n  };\n  return (\n    <ListCon>\n      <Menu\n        handleMenuClick={handleMenuClick}\n        luminantColor={luminantColor}\n        isSticky={isSticky}\n        menuIndex={menuIndex}\n        userColor={userColor}\n      />\n      {blogData && blogData.length !== 0 && <Search getSearch={getSearch} />}\n      <MyList\n        blogData={blogData}\n        luminantColor={luminantColor}\n        userInfo={userInfo}\n        userColor={userColor}\n        sendToListValue={sendToListValue}\n        deleteItem={deleteItem}\n        handleMenuClick={handleMenuClick}\n      />\n    </ListCon>\n  );\n}\nconst ListCon = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n`;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AADA;AAHA;AAOA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAOA;AAAA;AAKA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAaA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAPA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}